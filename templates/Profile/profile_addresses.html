{% extends "Profile/profile_base.html" %}
{% from "bootstrap5/form.html" import render_form %}
{% block title %}Profile Home{% endblock %}
{% block profile_block %}
<!-- Profile Content -->
<!--<div class="col-md-9">-->
<!--    <h2>User Profile</h2>-->
<!--    <div class="card p-3" style="max-width: 600px;">-->
<!--        <div class="text-center mb-3">-->
<!--            <img src="{{ current_user.email | gravatar }}" alt="Profile Picture" class="rounded-circle" width="100"-->
<!--                 height="100">-->
<!--        </div>-->
<!--        <ul class="list-group list-group-flush">-->
<!--            <li class="list-group-item"><strong>Name:</strong> {{ current_user.name }}</li>-->
<!--            <li class="list-group-item"><strong>Email:</strong> {{ current_user.email }}</li>-->
<!--            <li class="list-group-item"><strong>Address:</strong> {{ current_user.address }}</li>-->
<!--            <li class="list-group-item"><strong>City:</strong> {{ current_user.city }}</li>-->
<!--            <li class="list-group-item"><strong>Postcode:</strong> {{ current_user.postcode }}</li>-->
<!--        </ul>-->
<!--        {{render_form(form, novalidate=True, button_map={"submit": "primary"}) }}-->
<!--    </div>-->
<!--</div>-->
<div class="container mt-4">
    <h3>Your Addresses</h3>

    <!-- Address cards layout -->

    <div class="row">
        {% for address in current_user.addresses %}
        <div class="col-md-4">
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ address.city }}</h5>
                    <p class="card-text">
                        {{ address.street }}<br>
                        {{ address.postcode }}
                    </p>
                    <form method="POST" action="{{ url_for('set_current_address', address_id=address.id) }}">
                        <button type="submit" class="btn btn-sm btn-outline-primary"
                                {% if address.current_address %} disabled {% endif %}>
                            {% if address.current_address %}Current{% else %}Make Current{% endif %}
                        </button>
                    </form>
                    {% if address.current_address %}
                    <span class="badge bg-success">Current</span>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}


        <!-- Repeat card as needed -->
    </div>
    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Add New Address</h5>

            {{render_form(form, novalidate=True, button_map={"submit": "primary"}) }}

        </div>
    </div>
</div>

{% endblock %}