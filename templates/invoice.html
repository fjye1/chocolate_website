<link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='assets/Choc_flav.svg') }}"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<div class="container my-4">
    <!-- Header -->
    <div style="background: linear-gradient(135deg, #afc08f 0%, #FCE7A3 100%);
        padding: 30px; border-radius: 8px 8px 0 0; margin-bottom: 30px;">
        <table width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td style="width: 150px; vertical-align: middle;">
                    <img src="https://regalchocolate.in/static/images/Logo_small.png"
                         alt="Site Logo"
                         width="150" height="150"
                         style="border-radius: 8px; display: block; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                </td>
                <td style="padding-left: 30px; vertical-align: middle;">
                    <h1 style="margin: 0 0 8px 0; font-size: 32px; font-weight: 600; color: #2d3748;">Invoice</h1>
                    <p style="margin: 0 0 16px 0; font-size: 16px; color: #4a5568;">Thank you for your order!</p>
                    <div style="background: rgba(255,255,255,0.5); padding: 16px; border-radius: 6px; backdrop-filter: blur(10px);">
                        <p style="margin: 0 0 6px 0; color: #2d3748;"><strong>Order ID:</strong> {{ order.order_id }}
                        </p>
                        <p style="margin: 0 0 6px 0; color: #2d3748;"><strong>Date:</strong> {{
                            order.created_at.strftime('%b %d, %Y') }}</p>
                        <p style="margin: 0; color: #2d3748;"><strong>Status:</strong> <span
                                style="text-transform: capitalize;">{{ order.status }}</span></p>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <hr>

    <!-- Shipping Address -->
    <h4>Shipping Address</h4>
    <p class="mb-4">
        {{ order.shipping_address.street }}<br>
        {{ order.shipping_address.city }}, {{ order.shipping_address.postcode }}
    </p>

    <hr>

    <!-- Items Table -->
    <h4>Items</h4>
    <div class="card shadow-sm mb-4">
        <div class="card-body p-3">
            <table class="table table-bordered align-middle mb-0" style="border-color:#dee2e6;">
                <thead class="table-light">
                <tr>
                    <th style="width:120px; text-align:center;">Image</th>
                    <th>Product</th>
                    <th style="text-align:center;">Box ID</th>
                    <th style="text-align:center;">Shipment ID</th>
                    <th style="text-align:center;">Qty</th>
                    <th style="text-align:right;">Price</th>
                    <th style="text-align:right;">Total</th>
                </tr>
                </thead>
                <tbody>
                {% for item in order.order_items %}
                <tr>
                    <td class="text-center">
                        <img src="{{ request.url_root.rstrip('/') }}/{{ item.product.pdf_image }}"
                             alt="{{ item.product.name }}"
                             class="img-thumbnail" style="max-width:100px; height:100px; object-fit:cover;">

                    </td>
                    <td>{{ item.product.name }}</td>
                    <td class="text-center">{{ item.box_id }}</td>
                    <td class="text-center">{{ item.shipment_id }}</td>
                    <td class="text-center">{{ item.quantity }}</td>
                    <td class="text-end">&#8377;{{ '%.2f' % item.price_at_purchase }}</td>
                    <td class="text-end">&#8377;{{ '%.2f' % (item.quantity * item.price_at_purchase) }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Totals -->
    <div class="d-flex justify-content-end">
        <div class="p-3 border rounded shadow-sm bg-light">
            <h5 class="mb-0">Total: <strong>&#8377;{{ '%.2f' % order.total_amount }}</strong></h5>
        </div>
    </div>
</div>

